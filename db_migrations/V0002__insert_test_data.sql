-- Вставка тестовых организаций
INSERT INTO organizations (name, inn, address) VALUES
('СНТ "Солнечный"', '7734567890', 'Московская область, Подольский район'),
('ТСЖ "Зелёный двор"', '7745123456', 'Москва, ул. Садовая, 15');

-- Вставка тестовых пользователей (пароли: password123)
INSERT INTO users (email, password_hash, full_name) VALUES
('admin@solnechny.ru', '$2b$10$abcdefghijklmnopqrstuvwxyz', 'Иванов Сергей Петрович'),
('member1@solnechny.ru', '$2b$10$abcdefghijklmnopqrstuvwxyz', 'Петрова Анна Ивановна'),
('member2@solnechny.ru', '$2b$10$abcdefghijklmnopqrstuvwxyz', 'Сидоров Михаил Александрович'),
('supervisor@system.ru', '$2b$10$abcdefghijklmnopqrstuvwxyz', 'Козлов Дмитрий Николаевич'),
('member3@solnechny.ru', '$2b$10$abcdefghijklmnopqrstuvwxyz', 'Морозова Елена Викторовна');

-- Назначение ролей пользователям
INSERT INTO user_organization_roles (user_id, organization_id, role, plot_number) VALUES
(1, 1, 'admin', '№12'),
(2, 1, 'member', '№45'),
(3, 1, 'member', '№78'),
(4, 1, 'supervisor', NULL),
(5, 1, 'member', '№56'),
(1, 2, 'member', '№5'),
(4, 2, 'supervisor', NULL);

-- Создание типов ресурсов для СНТ "Солнечный"
INSERT INTO resource_types (organization_id, name, unit, icon) VALUES
(1, 'Электричество', 'кВт·ч', 'Zap'),
(1, 'Вода', 'м³', 'Droplet'),
(1, 'Газ', 'м³', 'Flame');

-- Создание тарифов
INSERT INTO tariffs (resource_type_id, rate, valid_from, valid_to) VALUES
(1, 5.40, '2024-01-01', NULL),
(2, 35.00, '2024-01-01', NULL),
(3, 7.20, '2024-01-01', NULL);

-- Добавление показаний счётчиков
INSERT INTO meter_readings (user_id, organization_id, resource_type_id, reading_value, reading_date) VALUES
(1, 1, 1, 12450, '2025-11-15'),
(1, 1, 2, 3200, '2025-11-15'),
(1, 1, 3, 850, '2025-11-15'),
(2, 1, 1, 8900, '2025-11-15'),
(2, 1, 2, 2100, '2025-11-15'),
(3, 1, 1, 15600, '2025-11-10'),
(3, 1, 2, 4500, '2025-11-10');

-- Добавление предыдущих показаний (для расчёта расхода)
INSERT INTO meter_readings (user_id, organization_id, resource_type_id, reading_value, reading_date) VALUES
(1, 1, 1, 12100, '2025-10-15'),
(1, 1, 2, 3050, '2025-10-15'),
(1, 1, 3, 780, '2025-10-15'),
(2, 1, 1, 8600, '2025-10-15'),
(2, 1, 2, 1950, '2025-10-15');

-- Добавление платежей
INSERT INTO payments (user_id, organization_id, amount, description, payment_date, status) VALUES
(1, 1, 4500, 'Электроснабжение за октябрь', '2025-11-15', 'paid'),
(1, 1, 2100, 'Водоснабжение за октябрь', '2025-11-10', 'paid'),
(2, 1, 3000, 'Членские взносы', '2025-11-05', 'paid'),
(2, 1, 1200, 'Вывоз мусора', '2025-11-01', 'pending'),
(3, 1, 5000, 'Частичная оплата задолженности', '2025-11-12', 'paid');

-- Добавление документов
INSERT INTO documents (organization_id, title, category, file_url, uploaded_by, upload_date) VALUES
(1, 'Устав СНТ "Солнечный"', 'Уставные документы', '/docs/charter.pdf', 1, '2024-03-15'),
(1, 'Протокол общего собрания', 'Протоколы', '/docs/protocol_03_2024.pdf', 1, '2024-03-10'),
(1, 'Смета расходов на 2024 год', 'Финансы', '/docs/budget_2024.pdf', 1, '2024-01-01'),
(1, 'Правила внутреннего распорядка', 'Регламенты', '/docs/rules.pdf', 1, '2024-02-20');

-- Добавление новостей
INSERT INTO news (organization_id, title, content, author_id, publish_date, is_important) VALUES
(1, 'Плановое отключение электричества', 'С 9:00 до 15:00 18 ноября будут проводиться плановые работы на линии электропередач. Просим учесть это при планировании дня.', 1, '2025-11-15', TRUE),
(1, 'Общее собрание участников', 'Приглашаем всех на общее собрание 25 ноября в 14:00 в помещении правления. Повестка: утверждение бюджета на 2026 год, выборы председателя.', 1, '2025-11-10', TRUE),
(1, 'Новые тарифы на воду', 'С 1 декабря изменяются тарифы на водоснабжение в связи с решением водоканала. Новый тариф составит 37.50 руб/м³', 1, '2025-11-08', TRUE);

-- Добавление контрагентов
INSERT INTO contractors (organization_id, name, inn, contact_info) VALUES
(1, 'ООО "Энергосервис"', '7712345678', 'Тел: +7 (495) 123-45-67, Email: info@energoservice.ru'),
(1, 'ИП Петров А.В.', '773456789012', 'Тел: +7 (916) 234-56-78'),
(1, 'ООО "Водоканал-Сервис"', '7723456789', 'Тел: +7 (495) 234-56-78, Email: service@vodokanal.ru'),
(1, 'ООО "Ремонт Плюс"', '7734567890', 'Тел: +7 (495) 345-67-89');

-- Добавление договоров
INSERT INTO contracts (organization_id, contractor_id, contract_type, start_date, end_date, status, description) VALUES
(1, 1, 'Электроснабжение', '2024-01-01', '2024-12-31', 'active', 'Договор на поставку электроэнергии'),
(1, 2, 'Вывоз мусора', '2024-03-01', '2025-02-28', 'active', 'Договор на вывоз ТБО'),
(1, 3, 'Водоснабжение', '2024-01-15', '2025-01-15', 'active', 'Договор на водоснабжение и водоотведение'),
(1, 4, 'Обслуживание дорог', '2024-06-01', '2024-11-30', 'expired', 'Ремонт внутренних дорог территории');

-- Добавление сообщений в чат
INSERT INTO chat_messages (organization_id, user_id, message, sent_at) VALUES
(1, 2, 'Добрый день! Когда планируется ремонт дороги?', '2025-11-15 10:30:00'),
(1, 1, 'Здравствуйте! Работы начнутся на следующей неделе', '2025-11-15 10:35:00'),
(1, 3, 'Подскажите, как внести показания счетчиков?', '2025-11-15 11:15:00'),
(1, 1, 'Можно через раздел "Ресурсы" в личном кабинете', '2025-11-15 11:20:00'),
(1, 5, 'Спасибо за информацию!', '2025-11-15 11:25:00');
